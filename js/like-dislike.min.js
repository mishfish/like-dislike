!function(i){function s(s,t){this.element=s,this.opts=i.extend({},n,t),this.opts.initialValue=parseInt(this.element.dataset.initialValue),this.init()}var t="like",e="dislike",n={click:null,beforeClick:null,initialValue:0,reverseMode:!0,readOnly:!1,likeBtnClass:"like",dislikeBtnClass:"dislike",activeClass:"active",disabledClass:"disabled"};s.prototype={init:function(){if(this.btns=i(this.element).find("."+this.opts.likeBtnClass+", ."+this.opts.dislikeBtnClass),this.readOnly(this.opts.readOnly),0!==this.opts.initialValue){var s=1===this.opts.initialValue?t:e;this.btnDown(s)}return this},readOnly:function(i){var s=this.btns;if(i)this.disable(s);else{if(!this.opts.reverseMode){var t=s.not("."+this.opts.activeClass);t.length&&(s=t)}this.enable(s)}},getBtn:function(s){return s===t?i(this.element).find("."+this.opts.likeBtnClass):s===e?i(this.element).find("."+this.opts.dislikeBtnClass):void i.error("Wrong btnType: "+s)},btnDown:function(i){var s=this.getBtn(i);s.addClass(this.opts.activeClass),this.opts.reverseMode||this.disable(s)},btnUp:function(i){var s=this.getBtn(i);s.removeClass(this.opts.activeClass),this.opts.reverseMode||this.enable(s)},enable:function(s){var n=this,l=n.opts;s.removeClass(l.disabledClass),l.beforeClick&&s.on("beforeClick",function(i){return l.beforeClick.call(n,i)}),s.on("click",function(s){var a=i(this);if(l.beforeClick&&!a.triggerHandler("beforeClick"))return!1;var o=a.hasClass(l.likeBtnClass)?t:e,r=n.btns.hasClass(l.activeClass),h=a.hasClass(l.activeClass),d=0,c=0,b=0;o===t?h?(n.btnUp(t),c=-1):(r&&(n.btnUp(e),b=-1),n.btnDown(t),c=1,d=1):h?(n.btnUp(e),b=-1):(r&&(n.btnUp(t),c=-1),n.btnDown(e),b=1,d=-1),l.click.call(n,d,c,b,s)})},disable:function(i){i.addClass(this.opts.disabledClass),i.off()}},i.fn.likeDislike=function(t){return this.each(function(){i.data(this,"plugin_LikeDislike")||i.data(this,"plugin_LikeDislike",new s(this,t))})}}(jQuery);